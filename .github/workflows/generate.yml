name: Generate Workflow

on:
  workflow_dispatch:

jobs:
  docs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          token: ${{ secrets.WORKFLOW_TOKEN }}

      - name: Create Workflow
        run: |
          echo """
          on:
            workflow_dispatch:

            jobs:
              testwf:
                run-on: ubuntu-latest
                steps:
                  - run: echo \"Hello World\"
          """  > ${{ github.workspace }}/.github/workflows/test-workflow.yml
          cat ${{ github.workspace }}/.github/workflows/test-workflow.yml

      - name: commit
        # env:
        #  github_token: ${{ secrets.WORKFLOW_TOKEN }}
        run: |
          git config --global user.email "a.rogi@gmail.com"
          git config --global user.name "arogic"
          git add ${{ github.workspace }}/.github/workflows/*
          git commit -m "Updated Workflow"
          git push
